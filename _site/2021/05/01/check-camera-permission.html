<!DOCTYPE html>
<html lang="en-US">
  <head>

    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-L7HJNDNMCD"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-L7HJNDNMCD');
      </script>
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Check Camera Permission in SwiftUI | Swift Code Show</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Check Camera Permission in SwiftUI" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="You need check camera permission everytime when app want to open the camera to capture a photo or record a video. Otherwise nothing happen, and never ask again if user rejected at the first time. Therefore, if you found your app has been rejected from camera access permission, you need ask user again manually. That’s why we have to check camera permission manually and I write this article." />
<meta property="og:description" content="You need check camera permission everytime when app want to open the camera to capture a photo or record a video. Otherwise nothing happen, and never ask again if user rejected at the first time. Therefore, if you found your app has been rejected from camera access permission, you need ask user again manually. That’s why we have to check camera permission manually and I write this article." />
<link rel="canonical" href="https://swiftcodeshow.com/2021/05/01/check-camera-permission.html" />
<meta property="og:url" content="https://swiftcodeshow.com/2021/05/01/check-camera-permission.html" />
<meta property="og:site_name" content="Swift Code Show" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-01T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Check Camera Permission in SwiftUI" />
<script type="application/ld+json">
{"description":"You need check camera permission everytime when app want to open the camera to capture a photo or record a video. Otherwise nothing happen, and never ask again if user rejected at the first time. Therefore, if you found your app has been rejected from camera access permission, you need ask user again manually. That’s why we have to check camera permission manually and I write this article.","headline":"Check Camera Permission in SwiftUI","dateModified":"2021-05-01T00:00:00+08:00","datePublished":"2021-05-01T00:00:00+08:00","url":"https://swiftcodeshow.com/2021/05/01/check-camera-permission.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://swiftcodeshow.com/2021/05/01/check-camera-permission.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=84cd2af5631a16e088de3700a9ec4a8ab41d80a7">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">Check Camera Permission in SwiftUI</h1>
      <nav style="margin-top: 2rem"><a href="/" class="btn">&lArr; Back to home</a></nav>
    </header>

    <main id="content" class="main-content" role="main">

      <p><b>Updated for Swift 5.4, and Xcode 12.5.</b></p>
      <p><a href="https://github.com/swiftcodeshow/CheckCameraPermission">Checkout source code from Github</a></p>

      <h2 id="topics">Topics</h2>

<p>You need check camera permission everytime when app want to open the camera to capture a photo or record a video. Otherwise nothing happen, and never ask again if user rejected at the first time. Therefore, if you found your app has been rejected from camera access permission, you need ask user again manually. That’s why we have to check camera permission manually and I write this article.</p>

<h2 id="codes">Codes</h2>

<p><strong>First of all</strong> Add <em>Privacy - Camera Usage Description</em> to <em>Info.plist</em>.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>
<span class="kd">import</span> <span class="kt">AVFoundation</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">title</span> <span class="o">=</span> <span class="s">""</span>
    
    <span class="kd">@State</span> <span class="k">var</span> <span class="nv">message</span> <span class="o">=</span> <span class="s">""</span>
    
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span> <span class="p">{</span>
            
            <span class="k">if</span> <span class="n">title</span> <span class="o">!=</span> <span class="s">""</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
                <span class="kt">Text</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="p">}</span>
            
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Check camera permission"</span><span class="p">)</span> <span class="p">{</span>
                
                <span class="k">let</span> <span class="nv">status</span> <span class="o">=</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">authorizationStatus</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span>
                <span class="k">switch</span> <span class="n">status</span> <span class="p">{</span>
                <span class="k">case</span> <span class="o">.</span><span class="nv">authorized</span><span class="p">:</span>
                    <span class="n">title</span> <span class="o">=</span> <span class="s">"Authorized"</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="s">"You can use camera"</span>
                <span class="k">case</span> <span class="o">.</span><span class="nv">notDetermined</span><span class="p">:</span>
                    <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">requestAccess</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">)</span> <span class="p">{</span> <span class="n">granted</span> <span class="k">in</span>
                        <span class="k">if</span> <span class="n">granted</span> <span class="p">{</span>
                            <span class="n">title</span> <span class="o">=</span> <span class="s">"Authorized"</span>
                            <span class="n">message</span> <span class="o">=</span> <span class="s">"User allows app to access camera"</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="k">case</span> <span class="o">.</span><span class="nv">denied</span><span class="p">:</span>
                    <span class="n">title</span> <span class="o">=</span> <span class="s">"Denied"</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="s">"User rejected app to access camera"</span>
                <span class="k">case</span> <span class="o">.</span><span class="nv">restricted</span><span class="p">:</span>
                    <span class="n">title</span> <span class="o">=</span> <span class="s">"Restricted"</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="s">"User is limited by Parent settings to access camera"</span>
                <span class="kd">@unknown</span> <span class="k">default</span><span class="p">:</span>
                    <span class="nf">fatalError</span><span class="p">(</span><span class="s">"Unknown status: </span><span class="se">\(</span><span class="n">status</span><span class="o">.</span><span class="n">rawValue</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<h2 id="snapshots">Snapshots</h2>

<p><img src="/assets/2021-05-01-check-camera-permission.gif" alt="Check Camera Permission" /></p>

<h2 id="key-points">Key Points</h2>

<ol>
  <li>Import <strong>AVFoundation</strong> or <strong>AVKit</strong> module.</li>
  <li>Request permission when you found the authorization status is <strong>notDetermined</strong>.</li>
</ol>


      <footer class="site-footer">
        <span class="site-footer-credits">SwiftCodeShow &copy; 2021</span>
        <a href="#" style="float: right">Back to top</a>
      </footer>
    </main>
  </body>
</html>